<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSB Course Scheduler - Fall 2026</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="title-section">
                <h1>DELAPLAINE SCHOOL OF BUSINESS</h1>
                <h2>Fall 2026 Course Schedule</h2>
            </div>
            <div class="controls">
                <div class="term-select">
                    <label for="termDropdown">Term:</label>
                    <select id="termDropdown">
                        <option value="fall-2026">Fall 2026</option>
                        <option value="spring-2027">Spring 2027</option>
                    </select>
                </div>
                <div class="faculty-select">
                    <label for="facultyDropdown">View as:</label>
                    <select id="facultyDropdown">
                        <option value="">All Faculty</option>
                    </select>
                </div>
                <div class="undo-controls">
                    <button id="undoBtn" class="btn btn-undo" disabled title="Nothing to undo">&#8630; Undo</button>
                    <a href="#" id="historyToggle" class="history-link">History</a>
                </div>
                <div class="export-buttons">
                    <button id="manageFaculty" class="btn btn-export">Manage Faculty</button>
                    <button id="exportJson" class="btn btn-export">Export JSON</button>
                    <button id="exportExcel" class="btn btn-export">Export Excel</button>
                    <button id="backupAll" class="btn btn-export">Backup All</button>
                    <button id="aiRecommend" class="btn btn-export btn-ai">AI Analyze</button>
                    <button id="restoreData" class="btn btn-export btn-warning">Reset</button>
                </div>
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot disconnected"></span>
                    <span class="status-text">Connecting...</span>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="left-panels">
                <aside class="sidebar" id="courseSidebar">
                    <div class="sidebar-header">
                        <h3>All Courses</h3>
                        <button id="addCourseBtn" class="btn btn-primary btn-sm">+ Add</button>
                    </div>
                    <div class="filter-controls">
                        <input type="text" id="courseFilter" placeholder="Search courses...">
                    </div>
                    <div class="course-list" id="courseList">
                        <!-- Courses will be populated by JavaScript -->
                    </div>
                </aside>

                <!-- Course Guides Panel (below sidebar) -->
                <aside class="course-guides-panel" id="courseGuidesPanel">
                <div class="guides-panel-header">
                    <h3>Course Guides</h3>
                    <button id="checkConflicts" class="btn btn-sm btn-primary">Check Conflicts</button>
                </div>
                <div class="guides-panel-content">
                    <div class="guide-select">
                        <label for="programSelect">Program:</label>
                        <select id="programSelect">
                            <option value="">Select a program...</option>
                            <option value="business">Business Administration</option>
                            <option value="accounting">Accounting</option>
                            <option value="economics">Economics</option>
                            <option value="finance">Finance</option>
                        </select>
                    </div>
                    <div class="semester-select" id="semesterSelectGroup" style="display: none;">
                        <label for="semesterSelect">Semester:</label>
                        <select id="semesterSelect">
                            <option value="">Select semester...</option>
                        </select>
                    </div>
                    <div class="recommended-courses" id="recommendedCourses">
                        <p class="no-guide-selected">Select a program and semester to see recommended courses.</p>
                    </div>
                    <div class="conflict-results" id="conflictResults" style="display: none;"></div>
                </div>
            </aside>
            </div><!-- end left-panels -->

            <main class="schedule-container">
                <div class="schedule-grid" id="scheduleGrid">
                    <!-- Header row - Day groups -->
                    <div class="grid-header-group mw-header" style="grid-column: 1 / 6;">MONDAY/WEDNESDAY</div>
                    <div class="grid-header-group tr-header" style="grid-column: 6 / 11;">TUESDAY/THURSDAY</div>
                    <div class="grid-header-group eve-header" style="grid-column: 11 / 15;">EVENING</div>
                    <div class="grid-header-group sat-header" style="grid-column: 15 / 16;">SAT</div>
                    <div class="grid-header-group asynch-header" style="grid-column: 16 / 17;">ASYNCH</div>

                    <!-- Time slot header row -->
                    <div class="grid-cell header-cell time-header">8:15-9:40</div>
                    <div class="grid-cell header-cell time-header">9:50-11:15</div>
                    <div class="grid-cell header-cell time-header">11:30-12:55</div>
                    <div class="grid-cell header-cell time-header">1:05-2:30</div>
                    <div class="grid-cell header-cell time-header">2:40-4:05</div>
                    <div class="grid-cell header-cell time-header">8:15-9:40</div>
                    <div class="grid-cell header-cell time-header">9:50-11:15</div>
                    <div class="grid-cell header-cell time-header">11:25-12:50</div>
                    <div class="grid-cell header-cell time-header">2:00-3:25</div>
                    <div class="grid-cell header-cell time-header">3:35-5:00</div>
                    <div class="grid-cell header-cell time-header">M 6:15-9</div>
                    <div class="grid-cell header-cell time-header">T 6:15-9</div>
                    <div class="grid-cell header-cell time-header">W 6:15-9</div>
                    <div class="grid-cell header-cell time-header">TR 6:15-9</div>
                    <div class="grid-cell header-cell time-header">SAT</div>
                    <div class="grid-cell header-cell time-header">ONLINE</div>

                    <!-- Slot label row -->
                    <div class="grid-cell slot-label">A</div>
                    <div class="grid-cell slot-label">B</div>
                    <div class="grid-cell slot-label">C</div>
                    <div class="grid-cell slot-label">D</div>
                    <div class="grid-cell slot-label">E</div>
                    <div class="grid-cell slot-label">G</div>
                    <div class="grid-cell slot-label">H</div>
                    <div class="grid-cell slot-label">I</div>
                    <div class="grid-cell slot-label">J</div>
                    <div class="grid-cell slot-label">K</div>
                    <div class="grid-cell slot-label">L</div>
                    <div class="grid-cell slot-label">M</div>
                    <div class="grid-cell slot-label">N</div>
                    <div class="grid-cell slot-label">O</div>
                    <div class="grid-cell slot-label"></div>
                    <div class="grid-cell slot-label"></div>

                    <!-- Schedule rows - drop zones for courses -->
                    <div class="grid-cell drop-zone mw-slot" data-slot="MW-A"></div>
                    <div class="grid-cell drop-zone mw-slot" data-slot="MW-B"></div>
                    <div class="grid-cell drop-zone mw-slot" data-slot="MW-C"></div>
                    <div class="grid-cell drop-zone mw-slot" data-slot="MW-D"></div>
                    <div class="grid-cell drop-zone mw-slot" data-slot="MW-E"></div>
                    <div class="grid-cell drop-zone tr-slot" data-slot="TR-G"></div>
                    <div class="grid-cell drop-zone tr-slot" data-slot="TR-H"></div>
                    <div class="grid-cell drop-zone tr-slot" data-slot="TR-I"></div>
                    <div class="grid-cell drop-zone tr-slot" data-slot="TR-J"></div>
                    <div class="grid-cell drop-zone tr-slot" data-slot="TR-K"></div>
                    <div class="grid-cell drop-zone eve-slot" data-slot="M-EVE"></div>
                    <div class="grid-cell drop-zone eve-slot" data-slot="T-EVE"></div>
                    <div class="grid-cell drop-zone eve-slot" data-slot="W-EVE"></div>
                    <div class="grid-cell drop-zone eve-slot" data-slot="TR-EVE"></div>
                    <div class="grid-cell drop-zone sat-slot" data-slot="SAT"></div>
                    <div class="grid-cell drop-zone asynch-slot" data-slot="ASYNCH"></div>
                </div>
            </main>

            <!-- Faculty Panel (right side) -->
            <aside class="faculty-panel" id="facultyPanel">
                <div class="faculty-panel-header">
                    <h3 id="facultyPanelTitle">Select a Faculty Member</h3>
                </div>
                <div class="faculty-panel-content" id="facultyPanelContent">
                    <p class="no-faculty-selected">Select a faculty member from the "View as" dropdown to see their schedule.</p>
                </div>
                <div class="faculty-panel-footer" id="facultyPanelFooter" style="display: none;">
                    <div class="share-link-section">
                        <label>Share this view:</label>
                        <div class="share-link-row">
                            <input type="text" id="facultyShareLink" readonly>
                            <button id="copyShareLink" class="btn btn-sm btn-primary">Copy</button>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Course detail modal -->
    <div class="modal" id="courseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 id="modalTitle">Course Details</h3>
            <div class="modal-body">
                <div class="form-group">
                    <label>Course:</label>
                    <span id="modalCourse"></span>
                </div>
                <div class="form-group">
                    <label>Instructor:</label>
                    <select id="modalInstructor">
                        <option value="">Select Instructor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Room:</label>
                    <select id="modalRoom">
                        <option value="">Select Room</option>
                    </select>
                </div>
                <div class="form-group bimodal-group" id="bimodalGroup" style="display: none;">
                    <label class="checkbox-label">
                        <input type="checkbox" id="modalBimodal">
                        <span>Bimodal (in-person + online)</span>
                    </label>
                </div>
                <div class="form-group">
                    <label>Scheduled:</label>
                    <span id="modalScheduled">Not scheduled</span>
                </div>
                <button id="saveModal" class="btn btn-primary">Save Changes</button>
                <button id="removeCourse" class="btn btn-danger">Remove from Schedule</button>
            </div>
        </div>
    </div>

    <!-- Add Course modal -->
    <div class="modal" id="addCourseModal">
        <div class="modal-content">
            <span class="close-modal" id="closeAddModal">&times;</span>
            <h3>Add New Course</h3>
            <div class="modal-body">
                <div class="form-group">
                    <label>Course Code:</label>
                    <input type="text" id="addCourseCode" placeholder="e.g., ACCT">
                </div>
                <div class="form-group">
                    <label>Course Number:</label>
                    <input type="text" id="addCourseNumber" placeholder="e.g., 201">
                </div>
                <div class="form-group">
                    <label>Course Name:</label>
                    <input type="text" id="addCourseName" placeholder="e.g., Financial Accounting">
                </div>
                <div class="form-group">
                    <label>Instructor:</label>
                    <select id="addCourseInstructor">
                        <option value="">Select Instructor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Room:</label>
                    <select id="addCourseRoom">
                        <option value="">Select Room</option>
                    </select>
                </div>
                <div class="form-group slot-info" id="addCourseSlotInfo" style="display: none; color: #1F4E78; font-weight: bold;"></div>
                <button id="submitAddCourse" class="btn btn-primary">Add Course</button>
            </div>
        </div>
    </div>

    <!-- Faculty Management modal -->
    <div class="modal" id="facultyModal">
        <div class="modal-content">
            <span class="close-modal" id="closeFacultyModal">&times;</span>
            <h3>Manage Faculty</h3>
            <div class="modal-body">
                <div class="form-group">
                    <label>Add New Faculty:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="newFacultyName" placeholder="Faculty name" style="flex: 1;">
                        <button id="addFacultyBtn" class="btn btn-primary btn-sm">Add</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Current Faculty:</label>
                    <div id="facultyList" class="faculty-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Restore Data Modal -->
    <div class="modal" id="restoreModal">
        <div class="modal-content">
            <span class="close-modal" id="closeRestoreModal">&times;</span>
            <h3>Restore Data</h3>
            <div class="modal-body">
                <p class="restore-warning">This will replace all current schedule data with data from a backup file. This action cannot be undone.</p>
                <div class="form-group">
                    <label>Password: <span class="password-hint" id="passwordHint" title="Click for hint">&#9432;</span></label>
                    <input type="password" id="restorePassword" placeholder="Enter password">
                </div>
                <div class="form-group">
                    <label>Backup File (.zip):</label>
                    <input type="file" id="restoreFile" accept=".zip">
                </div>
                <button id="submitRestore" class="btn btn-danger">Restore Data</button>
            </div>
        </div>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="historyPanel">
        <div class="history-panel-header">
            <h3>Action History</h3>
            <span class="close-history" id="closeHistoryPanel">&times;</span>
        </div>
        <div class="history-panel-content" id="historyContent">
            <p class="no-history">No actions recorded yet</p>
        </div>
    </div>

    <!-- AI Recommendations Modal -->
    <div class="modal" id="aiModal">
        <div class="modal-content modal-large">
            <span class="close-modal" id="closeAiModal">&times;</span>
            <h3>AI Schedule Analysis</h3>
            <div class="modal-body">
                <div id="aiLoading" class="ai-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Analyzing schedule with AI... This may take a moment.</p>
                </div>
                <div id="aiContent" class="ai-content">
                    <p class="ai-intro">Click "Analyze Schedule" to get AI-powered recommendations for improving your course schedule.</p>
                    <button id="runAiAnalysis" class="btn btn-primary btn-ai-run">Analyze Schedule</button>
                </div>
                <div id="aiResults" class="ai-results" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
